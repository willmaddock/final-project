<p style="color: green"><%= notice %></p> <!-- Display any notice message in green -->

<%= render @profile %> <!-- Render the details of the profile -->

<div class="mt-4 text-center">
  <% if @profile.avatar.attached? %>
    <%= image_tag @profile.avatar.variant(resize_to_fill: [200, 200]), alt: "#{@profile.user.full_name}'s Avatar", class: "img-thumbnail" %>
  <% else %>
    <%= image_tag asset_path('default_profile_picture.png'), size: "200x200", alt: "Default Avatar", class: "img-thumbnail" %>
  <% end %>

  <div class="mt-3">
    <%= link_to "Edit this profile", edit_profile_path(@profile), class: "btn btn-warning", data: { toggle: 'tooltip', placement: 'top', title: 'Edit profile details' } %>
    <%= link_to "Back to profiles", profiles_path, class: "btn btn-secondary", data: { toggle: 'tooltip', placement: 'top', title: 'Go back to profiles list' } %>
    <%= button_to "Delete this profile", @profile, method: :delete, data: { confirm: "Are you sure you want to delete this profile?", toggle: 'tooltip', placement: 'top', title: 'Delete profile' }, class: "btn btn-danger" %>
  </div>
</div>

<hr>

<div class="mt-5">
  <h3>Leave a Comment</h3>

  <%= form_with model: [@profile, Comment.new], local: true do |form| %>
    <div class="mb-3">
      <%= form.text_area :body, rows: 3, class: "form-control", placeholder: "Write your comment here..." %>
    </div>
    <%= form.submit "Post Comment", class: "btn btn-primary" %>
  <% end %>
</div>

<hr>

<div class="mt-4">
  <h4>Comments</h4>
  <% @profile.comments.each do |comment| %>
    <div class="card my-2">
      <div class="card-body">
        <p><strong><%= comment.user.username %></strong>: <%= comment.body %></p>
        <div>
          <%= button_to "👍 #{comment.votes_for.size}", upvote_profile_comment_path(@profile, comment), method: :post, class: "btn btn-outline-success btn-sm" %>

          <% if comment.user == current_user %>
            <%= button_to "Delete", profile_comment_path(@profile, comment), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-outline-danger btn-sm" %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>